########################################################################################
################################################### Global cluster configuration
########################################################################################
global:
  elasticsearch:
    enabled: false

########################################################################################
################################################### Orchestration cluster configuration
########################################################################################
orchestration:

  exporters:
    camunda:
      enabled: false
    rdbms:
      enabled: true
  data:
    secondaryStorage:
      type: rdbms
      rdbms:
        url: jdbc:postgresql://postgres-postgresql:5432/camunda
        username: camunda
        secret:
          inlineSecret: camunda
        queueSize: 750
        history:
          defaultHistoryTTL: PT1M
          minHistoryCleanupInterval: PT2S
          maxHistoryCleanupInterval: PT1M
          historyCleanupBatchSize: 50000
  # We set extra configuration to configure additional settings for Broker and Gateway, that are part
  # of the orchestration cluster.
  # This allows adding configurations without the need of overwriting all environment variables from the Platform chart.
  extraConfiguration:
    application.yml: |
      zeebe.gateway.monitoring.enabled: "true"
      zeebe.gateway.threads.managementThreads: "1"
      zeebe.broker.experimental.consistencyChecks.enablePreconditions: "true"
      zeebe.broker.experimental.consistencyChecks.enableForeignKeyChecks: "true"
      zeebe.broker.executionMetricsExporterEnabled: "true"
      zeebe.broker.data.disk.freeSpace.processing: "3GB"
      zeebe.broker.data.disk.freeSpace.replication: "2GB"
      # Configure a rate limit for all writes, so that we can visualize flow control metrics.
      zeebe.broker.flowControl.write.enabled: "true"
      zeebe.broker.flowControl.write.limit: 4000
      zeebe.broker.flowControl.write.throttling.enabled: "true"
      # Disable the importers
      # camunda.tasklist.importerEnabled: "false"
      # camunda.operate.importerEnabled: "false"
      # Schema management has been moved out of exporter - to be bootstrap at start; once
      # camunda.data.secondary-storage.retention.enabled: "true"
      # 0s causes ILM to move data asap - it is normally the default
      # https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-index-lifecycle.html#ilm-phase-transitions
      # camunda.data.secondary-storage.retention.minimum-age: "70m"
      # camunda.database.retention.policyName: "camunda-retention-policy"
      #Metrics:
      camunda.flags.jfr.metrics: "true"
      # RocksDB memory limit setting, limits the overall RocksDB memory usage
      # ZEEBE_BROKER_EXPERIMENTAL_ROCKSDB_MEMORYLIMIT
      zeebe.broker.experimental.rocksdb.memoryLimit: "64MB"
      camunda.data.audit-log.enabled: "false"

########################################################################################
################################################### Disable ElasticSearch for RDBMS
########################################################################################
elasticsearch:
  enabled: false
