# GKE stable nodes need nodeSelector and tolerations config.

identity:
  keycloak:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable
    postgresql:
      primary:
        tolerations:
          - key: t-core-16-unstable
            operator: Exists
            effect: NoSchedule
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
                - matchExpressions:
                    - key: nodegroup
                      operator: In
                      values:
                        - t-core-16-unstable

  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

postgresql:
  primary:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable

operate:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

tasklist:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

zeebe:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

zeebe-gateway:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

optimize:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

connectors:
  tolerations:
    - key: t-core-16-unstable
      operator: Exists
      effect: NoSchedule
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: nodegroup
                operator: In
                values:
                  - t-core-16-unstable

webModeler:
  restapi:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable
  webapp:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable
  websockets:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable


elasticsearch:
  master:
    tolerations:
      - key: t-core-16-unstable
        operator: Exists
        effect: NoSchedule
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: nodegroup
                  operator: In
                  values:
                    - t-core-16-unstable
