apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: {{ include "bench.name" . }}-clients
  labels:
    release: {{ index .Values "clients" "serviceMonitor" "release" }}
    {{- include "bench.labels" . | nindent 4 }}
spec:
  selector:
    matchLabels:
      app.kubernetes.io/component: client
      {{- include "bench.matchLabels" . | nindent 6 }}
  endpoints:
    - honorLabels: true
      interval: {{ index .Values "clients" "serviceMonitor" "scrapeInterval" }}
      path: /metrics
      port: http
