## Endpoint definitions

paths:
  /expression/evaluation:
    post:
      operationId: evaluateExpression
      x-eventually-consistent: false
      tags:
        - Expression
      summary: Evaluate a FEEL expression
      description: Evaluates a FEEL expression with optional context variables and scope. Requires EXPRESSION:EVALUATE permission.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpressionEvaluationRequest'
      responses:
        '200':
          description: Expression evaluated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ExpressionEvaluationResult'
        "400":
          $ref: 'common-responses.yaml#/components/responses/InvalidData'
        "401":
          $ref: 'common-responses.yaml#/components/responses/Unauthorized'
        "403":
          $ref: 'common-responses.yaml#/components/responses/Forbidden'
        "500":
          $ref: 'common-responses.yaml#/components/responses/InternalServerError'

components:
  schemas:
    ExpressionEvaluationRequest:
      type: object
      required:
        - expression
      properties:
        expression:
          type: string
          description: The FEEL expression to evaluate (e.g., "=x + y")
          example: "=x + y"
        tenantId:
          type: string
          description: The tenant ID for multi-tenant environments
          example: "tenant_123"
    ExpressionEvaluationResult:
      type: object
      required:
        - expression
        - result
      properties:
        expression:
          type: string
          description: The evaluated expression
          example: "=x + y"
        result:
          description: The result value. Type depends on the result type (String, Boolean, Number, or Object)
          type: object
          example: 30
        warnings:
          type: array
          description: List of warnings generated during expression evaluation
          items:
            type: string
          example: [ ]

