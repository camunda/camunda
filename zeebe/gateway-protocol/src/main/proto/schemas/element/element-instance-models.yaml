ElementInstanceSearchQuerySortRequest:
      type: object
      properties:
        field:
          description: The field to sort by.
          type: string
          enum:
            - elementInstanceKey
            - processInstanceKey
            - processDefinitionKey
            - processDefinitionId
            - startDate
            - endDate
            - elementId
            - elementName
            - type
            - state
            - incidentKey
            - tenantId
        order:
          $ref: '../common/enums.yaml#/SortOrderEnum'
      required:
        - field
ElementInstanceSearchQuery:
  description: Element instance search request.
  type: object
  additionalProperties: false
  allOf:
    - $ref: '../search/search-models.yaml#/SearchQueryRequest'
  properties:
    sort:
      description: Sort field criteria.
      type: array
      items:
        $ref: "#/ElementInstanceSearchQuerySortRequest"
    filter:
      description: The element instance search filters.
      allOf:
        - $ref: "#/ElementInstanceFilter"
ElementInstanceFilter:
  description: Element instance filter.
  type: object
  properties:
    processDefinitionId:
      description: The process definition ID associated to this element instance.
      allOf:
        - $ref: "../common/identifiers.yaml#/ProcessDefinitionId"
    state:
      description: State of element instance as defined set of values.
      allOf:
        - $ref: "../common/filters.yaml#/ElementInstanceStateFilterProperty"
    type:
      description: Type of element as defined set of values.
      type: string
      enum:
        - UNSPECIFIED
        - PROCESS
        - SUB_PROCESS
        - EVENT_SUB_PROCESS
        - AD_HOC_SUB_PROCESS
        - AD_HOC_SUB_PROCESS_INNER_INSTANCE
        - START_EVENT
        - INTERMEDIATE_CATCH_EVENT
        - INTERMEDIATE_THROW_EVENT
        - BOUNDARY_EVENT
        - END_EVENT
        - SERVICE_TASK
        - RECEIVE_TASK
        - USER_TASK
        - MANUAL_TASK
        - TASK
        - EXCLUSIVE_GATEWAY
        - INCLUSIVE_GATEWAY
        - PARALLEL_GATEWAY
        - EVENT_BASED_GATEWAY
        - SEQUENCE_FLOW
        - MULTI_INSTANCE_BODY
        - CALL_ACTIVITY
        - BUSINESS_RULE_TASK
        - SCRIPT_TASK
        - SEND_TASK
        - UNKNOWN
    elementId:
      description: The element ID for this element instance.
      allOf:
        - $ref: "../common/identifiers.yaml#/ElementId"
    elementName:
      type: string
      description: >
        The element name. This only works for data created with 8.8 and onwards.
        Instances from prior versions don't contain this data and cannot be found.
    hasIncident:
      type: boolean
      description: Shows whether this element instance has an incident related to.
    tenantId:
      $ref: "../common/identifiers.yaml#/TenantId"
    elementInstanceKey:
      allOf:
        - $ref: "../common/keys.yaml#/ElementInstanceKey"
      description: The assigned key, which acts as a unique identifier for this element instance.
    processInstanceKey:
      allOf:
        - $ref: "../common/keys.yaml#/ProcessInstanceKey"
      description: The process instance key associated to this element instance.
    processDefinitionKey:
      allOf:
        - $ref: "../common/keys.yaml#/ProcessDefinitionKey"
      description: The process definition key associated to this element instance.
    incidentKey:
      allOf:
        - $ref: "../common/keys.yaml#/IncidentKey"
      description: The key of incident if field incident is true.
    startDate:
      description: The start date of this element instance.
      allOf:
        - $ref: "../common/filters.yaml#/DateTimeFilterProperty"
    endDate:
      description: The end date of this element instance.
      allOf:
        - $ref: "../common/filters.yaml#/DateTimeFilterProperty"
    elementInstanceScopeKey:
      type: string
      description: >
        The scope key of this element instance. If provided with a process instance
        key it will return element instances that are immediate children of the process
        instance. If provided with an element instance key it will return element instances that
        are immediate children of the element instance.
      oneOf:
        - $ref: "../common/keys.yaml#/ElementInstanceKey"
        - $ref: "../common/keys.yaml#/ProcessInstanceKey"
ElementInstanceSearchQueryResult:
  type: object
  allOf:
    - $ref: "../search/search-models.yaml#/SearchQueryResponse"
  properties:
    items:
      description: The matching element instances.
      type: array
      items:
        $ref: "../element/element-instance-models.yaml#/ElementInstanceResult"
ElementInstanceResult:
  type: object
  required:
    - processDefinitionId
    - startDate
    - elementId
    - elementName
    - type
    - state
    - hasIncident
    - tenantId
    - elementInstanceKey
    - processInstanceKey
    - processDefinitionKey
  properties:
    processDefinitionId:
      description: The process definition ID associated to this element instance.
      allOf:
        - $ref: "../common/identifiers.yaml#/ProcessDefinitionId"
    startDate:
      description: Date when element instance started.
      type: string
      format: date-time
    endDate:
      description: Date when element instance finished.
      type: string
      format: date-time
    elementId:
      description: The element ID for this element instance.
      allOf:
        - $ref: "../common/identifiers.yaml#/ElementId"
    elementName:
      description: The element name for this element instance.
      type: string
    type:
      description: Type of element as defined set of values.
      type: string
      enum:
        - UNSPECIFIED
        - PROCESS
        - SUB_PROCESS
        - EVENT_SUB_PROCESS
        - AD_HOC_SUB_PROCESS
        - AD_HOC_SUB_PROCESS_INNER_INSTANCE
        - START_EVENT
        - INTERMEDIATE_CATCH_EVENT
        - INTERMEDIATE_THROW_EVENT
        - BOUNDARY_EVENT
        - END_EVENT
        - SERVICE_TASK
        - RECEIVE_TASK
        - USER_TASK
        - MANUAL_TASK
        - TASK
        - EXCLUSIVE_GATEWAY
        - INCLUSIVE_GATEWAY
        - PARALLEL_GATEWAY
        - EVENT_BASED_GATEWAY
        - SEQUENCE_FLOW
        - MULTI_INSTANCE_BODY
        - CALL_ACTIVITY
        - BUSINESS_RULE_TASK
        - SCRIPT_TASK
        - SEND_TASK
        - UNKNOWN
    state:
      description: State of element instance as defined set of values.
      allOf:
        - $ref: "../common/enums.yaml#/ElementInstanceStateEnum"
    hasIncident:
      description: Shows whether this element instance has an incident. If true also an incidentKey is provided.
      type: boolean
    tenantId:
      description: The tenant ID of the incident.
      allOf:
        - $ref: "../common/identifiers.yaml#/TenantId"
    elementInstanceKey:
      allOf:
        - $ref: "../common/keys.yaml#/ElementInstanceKey"
      description: The assigned key, which acts as a unique identifier for this element instance.
    processInstanceKey:
      allOf:
        - $ref: "../common/keys.yaml#/ProcessInstanceKey"
      description: The process instance key associated to this element instance.
    processDefinitionKey:
      allOf:
        - $ref: "../common/keys.yaml#/ProcessDefinitionKey"
      description: The process definition key associated to this element instance.
    incidentKey:
      allOf:
        - $ref: "../common/keys.yaml#/IncidentKey"
      description: Incident key associated with this element instance.
ElementInstanceIncidentSearchQuery:
  type: object
  allOf:
    - $ref: "../search/search-models.yaml#/SearchQueryRequest"
  properties:
    sort:
      description: Sort field criteria.
      type: array
      items:
        $ref: "../incidents/incident-models.yaml#/IncidentSearchQuerySortRequest"
AdHocSubProcessActivateActivitiesInstruction:
  type: object
  properties:
    elements:
      description: Activities to activate.
      type: array
      items:
        $ref: "#/AdHocSubProcessActivateActivityReference"
    cancelRemainingInstances:
      description: Whether to cancel remaining instances of the ad-hoc sub-process.
      type: boolean
      default: false
  required:
    - elements
AdHocSubProcessActivateActivityReference:
  type: object
  properties:
    elementId:
      description: The ID of the element that should be activated.
      allOf:
        - $ref: "../common/identifiers.yaml#/ElementId"
    variables:
      description: Variables to be set when activating the element.
      type: object
      additionalProperties: true
  required:
    - elementId
